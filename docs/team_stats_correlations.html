<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Team Statistics ‚Äî Interesting Correlations</title>
  <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
  <style>
    :root {
      --red: #ef4444;
      --blue: #0ea5e9;
      --grid: #e8eaed;
      --axis: #9aa0a6;
      --text: #222;
    }
    body { margin: 16px; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; color: var(--text); background: #f7f7f7; }
    .container { max-width: 1200px; margin: 0 auto; background: #fff; border: 1px solid #e5e5e5; border-radius: 10px; padding: 12px 16px 22px; box-shadow: 0 1px 3px rgba(0,0,0,.06); }
    h1 { margin: 0 0 10px; font-size: 22px; }
    .subtitle { color: #666; font-size: 13px; margin: 4px 0 12px; }
    .controls { display: flex; align-items: center; gap: 10px; margin: 6px 0 8px; }
    .panel { margin: 12px 0 14px; border: 1px solid #e5e5e5; border-radius: 10px; overflow: hidden; background: #fff; }
    .panel > summary { padding: 10px 14px; background: #f5f7fa; border-bottom: 1px solid #ebeff5; font-weight: 600; cursor: pointer; user-select: none; list-style: none; }
    .panel[open] > summary { border-bottom-color: #e6eaf0; }
    .chart-wrap { padding: 8px 8px 0; }
    .legend { display: flex; align-items: center; gap: 16px; color: #555; font-size: 12px; padding: 0 10px 10px; }
    .swatch { display: inline-block; width: 12px; height: 12px; border-radius: 2px; margin-right: 6px; vertical-align: middle; }
    .avg { background: repeating-linear-gradient(90deg, #bbb, #bbb 2px, transparent 2px, transparent 6px); border: 1px solid #bbb; }
    .red { background: var(--red); opacity: .5; }
    .blue { background: var(--blue); opacity: .5; }
    .tooltip { position: absolute; pointer-events: none; background: rgba(0,0,0,.78); color: #fff; padding: 6px 8px; border-radius: 6px; font-size: 12px; z-index: 10; }
    .info { background: #f3f6fa; border: 1px solid #e1e7ef; border-radius: 8px; padding: 10px 14px; color: #243246; font-size: 14px; margin: 8px 0 12px; }
    .info summary { font-weight: 600; cursor: pointer; }
    .correlation-badge { display: inline-block; padding: 2px 8px; border-radius: 4px; font-size: 11px; font-weight: 600; }
    .corr-strong { background: #dcfce7; color: #166534; }
    .corr-moderate { background: #fef3c7; color: #854d0e; }
    .corr-weak { background: #fee2e2; color: #991b1b; }
    .help-icon { display: inline-block; width: 16px; height: 16px; border-radius: 50%; background: #3b82f6; color: white; text-align: center; line-height: 16px; font-size: 11px; font-weight: bold; margin-left: 8px; cursor: help; vertical-align: middle; }
    .metric-tooltip { position: absolute; pointer-events: none; background: rgba(30,64,175,.95); color: #fff; padding: 8px 12px; border-radius: 6px; font-size: 12px; z-index: 100; max-width: 350px; line-height: 1.5; box-shadow: 0 4px 6px rgba(0,0,0,.3); }
  </style>
  <script>
    async function tryCsv(paths) {
      let lastErr;
      for (const p of paths) {
        try { return await d3.csv(p, d3.autoType); } catch (e) { lastErr = e; }
      }
      throw lastErr || new Error('Unable to load CSV: ' + paths.join(', '));
    }

    function fmt2(x) { return d3.format('.2f')(x); }
    function fmt3(x) { return d3.format('.3f')(x); }
    function toPct(x) { return d3.format('.1%')(x); }

    function regression(points) {
      let n = 0, sx = 0, sy = 0, sxy = 0, sxx = 0, syy = 0;
      for (const [x0, y0] of points) {
        const x = +x0, y = +y0;
        if (!Number.isFinite(x) || !Number.isFinite(y)) continue;
        n++; sx += x; sy += y; sxy += x*y; sxx += x*x; syy += y*y;
      }
      if (n < 2) return { m: 0, b: sy / (n || 1), r2: 0 };
      const denom = n * sxx - sx * sx;
      const m = denom !== 0 ? (n * sxy - sx * sy) / denom : 0;
      const b = (sy - m * sx) / n;
      
      const ssr = points.reduce((sum, [x0, y0]) => {
        const x = +x0, y = +y0;
        if (!Number.isFinite(x) || !Number.isFinite(y)) return sum;
        return sum + Math.pow(y - (m * x + b), 2);
      }, 0);
      const sst = syy - (sy * sy) / n;
      const r2 = sst !== 0 ? Math.max(0, 1 - ssr / sst) : 0;
      
      return { m, b, r2 };
    }

    async function loadData() {
      const stats = await tryCsv([
        '../output/team_aggregated_stats.csv',
        'output/team_aggregated_stats.csv',
        '/output/team_aggregated_stats.csv'
      ]);

      for (const row of stats) {
        row.logoUrl = (row.logoId !== '' && row.logoId != null) ? 
          `https://cdn.neonsportz.com/teamlogos/256/${row.logoId}.png` : null;
      }

      return stats;
    }

    function drawScatter(holder, rows, cfg) {
      const data = rows.filter(d => 
        Number.isFinite(+d[cfg.xKey]) && Number.isFinite(+d[cfg.yKey])
      );

      if (data.length < 2) return;

      const margin = { top: 20, right: 24, bottom: 46, left: 70 };
      const width = 1080, height = 480;
      const innerW = width - margin.left - margin.right;
      const innerH = height - margin.top - margin.bottom;

      const panel = holder.append('details').attr('class', 'panel').attr('open', true);
      const summary = panel.append('summary');
      summary.append('span').text(cfg.title);
      
      if (cfg.metricHelp) {
        const helpIcon = summary.append('span').attr('class', 'help-icon').text('?');
        const metricTip = d3.select('body').append('div').attr('class', 'metric-tooltip').style('display', 'none');
        helpIcon.on('mouseenter', function(evt) {
          metricTip.style('display', 'block').html(cfg.metricHelp);
        }).on('mousemove', (evt) => {
          metricTip.style('left', (evt.pageX + 12) + 'px').style('top', (evt.pageY - 28) + 'px');
        }).on('mouseleave', () => {
          metricTip.style('display', 'none');
        });
      }
      
      const wrap = panel.append('div').attr('class', 'chart-wrap');
      const svg = wrap.append('svg').attr('width', width).attr('height', height);
      const g = svg.append('g').attr('transform', `translate(${margin.left},${margin.top})`);

      const yVals = data.map(d => +d[cfg.yKey]);
      const yMin = d3.min(yVals), yMax = d3.max(yVals);
      const yRange = yMax - yMin;
      const yPad = yRange * 0.15 || 0.5;
      const y = d3.scaleLinear()
        .domain([yMin - yPad, yMax + yPad])
        .range([innerH, 0]);

      const xVals = data.map(d => +d[cfg.xKey]);
      const xMin = d3.min(xVals), xMax = d3.max(xVals);
      const xRange = xMax - xMin;
      const xPad = xRange * 0.15 || 0.5;
      const x = d3.scaleLinear()
        .domain([xMin - xPad, xMax + xPad])
        .range([0, innerW]);

      g.append('g').attr('transform', `translate(0,${innerH})`)
        .call(d3.axisBottom(x).ticks(10).tickFormat(cfg.xFormat || fmt2).tickSize(-innerH).tickPadding(8))
        .call(s => s.selectAll('.tick line').attr('stroke', '#e2e2e2'))
        .call(s => s.select('.domain').attr('stroke', '#9aa0a6'));

      g.append('g')
        .call(d3.axisLeft(y).ticks(10).tickFormat(cfg.yFormat || fmt2).tickSize(-innerW).tickPadding(6))
        .call(s => s.selectAll('.tick line').attr('stroke', '#efefef'))
        .call(s => s.select('.domain').attr('stroke', '#dcdcdc'));

      const yAvg = d3.mean(yVals), xAvg = d3.mean(xVals);
      g.append('line').attr('x1', 0).attr('x2', innerW).attr('y1', y(yAvg)).attr('y2', y(yAvg))
        .attr('stroke', '#999').attr('stroke-dasharray', '6,4').attr('stroke-width', 1.5);
      g.append('line').attr('x1', x(xAvg)).attr('x2', x(xAvg)).attr('y1', 0).attr('y2', innerH)
        .attr('stroke', '#9aa0a6').attr('stroke-dasharray', '6,4').attr('stroke-width', 1.5);
      g.append('text').attr('x', 6).attr('y', y(yAvg)-6).attr('fill', '#555').attr('font-size', 11)
        .text('Avg Y: ' + (cfg.yFormat || fmt2)(yAvg));
      g.append('text').attr('x', x(xAvg)+6).attr('y', 12).attr('fill', '#555').attr('font-size', 11)
        .text('Avg X: ' + (cfg.xFormat || fmt2)(xAvg));

      const { m, b, r2 } = regression(data.map(d => [+d[cfg.xKey], +d[cfg.yKey]]));
      const xRangePts = [d3.min(xVals), d3.max(xVals)];
      g.append('line')
        .attr('x1', x(xRangePts[0])).attr('y1', y(m*xRangePts[0] + b))
        .attr('x2', x(xRangePts[1])).attr('y2', y(m*xRangePts[1] + b))
        .attr('stroke', '#777').attr('stroke-width', 2).attr('opacity', .95);

      const tip = d3.select('body').append('div').attr('class', 'tooltip').style('display', 'none');

      const size = 30;
      const node = g.selectAll('.team').data(data, d => d.team).join('g').attr('class', 'team')
        .attr('transform', d => `translate(${x(d[cfg.xKey])},${y(d[cfg.yKey])})`)
        .on('mouseenter', function(evt, d){
          const trend = m * d[cfg.xKey] + b;
          const res = d[cfg.yKey] - trend;
          let html = `<strong>${d.team}</strong><br>`;
          html += `${cfg.xLabel}: ${(cfg.xFormat || fmt2)(d[cfg.xKey])}<br>`;
          html += `${cfg.yLabel}: ${(cfg.yFormat || fmt2)(d[cfg.yKey])}<br>`;
          html += `Win%: ${toPct(d.win_pct)}<br>`;
          html += `Œî vs trend: ${(res>=0?'+':'') + fmt2(res)}<br>`;
          
          const qx = +d[cfg.xKey] >= xAvg;
          const qy = +d[cfg.yKey] >= yAvg;
          let quadrant = '';
          if (cfg.quadrantHelp) {
            if (qx && qy) quadrant = '<em>' + cfg.quadrantHelp.topRight + '</em>';
            else if (!qx && qy) quadrant = '<em>' + cfg.quadrantHelp.topLeft + '</em>';
            else if (!qx && !qy) quadrant = '<em>' + cfg.quadrantHelp.bottomLeft + '</em>';
            else quadrant = '<em>' + cfg.quadrantHelp.bottomRight + '</em>';
          } else {
            if (qx && qy) quadrant = '<em>–ü—Ä–∞–≤—ã–π –≤–µ—Ä—Ö–Ω–∏–π: –≤—ã—Å–æ–∫–∏–π X, –≤—ã—Å–æ–∫–∏–π Y</em>';
            else if (!qx && qy) quadrant = '<em>–õ–µ–≤—ã–π –≤–µ—Ä—Ö–Ω–∏–π: –Ω–∏–∑–∫–∏–π X, –≤—ã—Å–æ–∫–∏–π Y</em>';
            else if (!qx && !qy) quadrant = '<em>–õ–µ–≤—ã–π –Ω–∏–∂–Ω–∏–π: –Ω–∏–∑–∫–∏–π X, –Ω–∏–∑–∫–∏–π Y</em>';
            else quadrant = '<em>–ü—Ä–∞–≤—ã–π –Ω–∏–∂–Ω–∏–π: –≤—ã—Å–æ–∫–∏–π X, –Ω–∏–∑–∫–∏–π Y</em>';
          }
          html += quadrant;
          
          tip.style('display','block').html(html);
        })
        .on('mousemove', (evt)=> tip.style('left', (evt.pageX+12)+'px').style('top',(evt.pageY-28)+'px'))
        .on('mouseleave', ()=> tip.style('display','none'));

      node.append('rect')
        .attr('x', -(size/2 + 2)).attr('y', -(size/2 + 2))
        .attr('width', size + 4).attr('height', size + 4)
        .attr('rx', 4).attr('ry', 4)
        .attr('fill', d => (+d[cfg.yKey] >= m*+d[cfg.xKey] + b) ? 'var(--red)' : 'var(--blue)')
        .attr('opacity', .16);

      node.append('image')
        .attr('href', d => d.logoUrl || null)
        .attr('x', -size/2).attr('y', -size/2)
        .attr('width', size).attr('height', size)
        .attr('opacity', .95);

      svg.append('text').attr('x', margin.left + innerW/2).attr('y', height-10)
        .attr('text-anchor', 'middle').attr('fill', '#444').attr('font-size', 12)
        .text(cfg.xLabel);
      svg.append('text').attr('transform', `translate(14, ${margin.top + innerH/2}) rotate(-90)`)
        .attr('text-anchor', 'middle').attr('fill', '#444').attr('font-size', 12)
        .text(cfg.yLabel);

      const legend = panel.append('div').attr('class', 'legend');
      legend.append('span').html(`<span class="swatch avg"></span>Avg X & Y`);
      legend.append('span').html(`<span class="swatch red"></span>Above trend`);
      legend.append('span').html(`<span class="swatch blue"></span>Below trend`);
      legend.append('span').style('margin-left','16px').text('Trend line in gray');

      let corrClass = 'corr-weak', corrLabel = 'Weak';
      if (r2 >= 0.5) { corrClass = 'corr-strong'; corrLabel = 'Strong'; }
      else if (r2 >= 0.25) { corrClass = 'corr-moderate'; corrLabel = 'Moderate'; }
      
      summary.append('span').attr('class', `correlation-badge ${corrClass}`)
        .style('margin-left', '12px')
        .html(`R¬≤=${fmt3(r2)} (${corrLabel})`);

      if (cfg.insight) {
        panel.append('div').style('padding', '8px 14px 10px').style('font-size', '13px')
          .style('color', '#555').style('font-style', 'italic').text('üí° ' + cfg.insight);
      }
    }

    function render() {
      loadData().then(allRows => {
        const charts = [
          {
            xKey: 'sacks_allowed_per_game',
            yKey: 'pass_ints_per_game',
            xLabel: 'Sacks Allowed per Game',
            yLabel: 'Interceptions Thrown per Game',
            title: 'O-Line Protection vs QB Turnovers',
            insight: 'Bad pass protection forces hurried throws, leading to more interceptions',
            metricHelp: '<strong>Sacks vs INTs:</strong> –ü–ª–æ—Ö–∞—è –∑–∞—â–∏—Ç–∞ –ª–∏–Ω–∏–∏ = —Å–ø–µ—à–Ω—ã–µ –±—Ä–æ—Å–∫–∏ = –±–æ–ª—å—à–µ –ø–µ—Ä–µ—Ö–≤–∞—Ç–æ–≤. –°–≤—è–∑—ã–≤–∞–µ—Ç —Ä–∞–±–æ—Ç—É O-line —Å –æ—à–∏–±–∫–∞–º–∏ QB.',
            quadrantHelp: {
              topRight: 'üò± –ö–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∞: –º–Ω–æ–≥–æ —Å—ç–∫–æ–≤ + –º–Ω–æ–≥–æ –ø–µ—Ä–µ—Ö–≤–∞—Ç–æ–≤ - –ª–∏–Ω–∏—è –Ω–µ –∑–∞—â–∏—â–∞–µ—Ç, QB –¥–µ–ª–∞–µ—Ç –æ—à–∏–±–∫–∏',
              topLeft: 'ü§î –ü–∞—Ä–∞–¥–æ–∫—Å: –º–∞–ª–æ —Å—ç–∫–æ–≤, –Ω–æ –º–Ω–æ–≥–æ INT - –ø—Ä–æ–±–ª–µ–º–∞ –≤ —Ä–µ—à–µ–Ω–∏—è—Ö QB, –Ω–µ –≤ –∑–∞—â–∏—Ç–µ',
              bottomLeft: '‚úÖ –ò–¥–µ–∞–ª—å–Ω–æ: —Ö–æ—Ä–æ—à–∞—è –∑–∞—â–∏—Ç–∞ –ª–∏–Ω–∏–∏ + QB –Ω–µ –¥–µ–ª–∞–µ—Ç –æ—à–∏–±–æ–∫',
              bottomRight: '‚ö†Ô∏è –û–ø–∞—Å–Ω–æ: –º–Ω–æ–≥–æ —Å—ç–∫–æ–≤, –Ω–æ –º–∞–ª–æ INT - QB –¥–µ—Ä–∂–∏—Ç—Å—è, –Ω–æ –¥–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å—Ç—ë—Ç'
            }
          },
          {
            xKey: 'def_ints',
            yKey: 'pass_ints',
            xLabel: 'Defensive Interceptions (Takeaways)',
            yLabel: 'Offensive Interceptions (Giveaways)',
            title: 'Turnover Balance ‚Äî Defensive INTs vs Offensive INTs',
            insight: 'Teams in top-right = high-variance style (aggressive on both sides). Bottom-left = conservative.',
            metricHelp: '<strong>–ë–∞–ª–∞–Ω—Å –ø–æ—Ç–µ—Ä—å:</strong> –í–µ—Ä—Ö–Ω–∏–π –ø—Ä–∞–≤—ã–π —É–≥–æ–ª = –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π —Å—Ç–∏–ª—å (—Ä–∏—Å–∫ —Å –æ–±–µ–∏—Ö —Å—Ç–æ—Ä–æ–Ω). –ù–∏–∂–Ω–∏–π –ª–µ–≤—ã–π = –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –º—è—á–∞.'
          },
          {
            xKey: 'pass_att_per_game',
            yKey: 'punts_per_game',
            xLabel: 'Pass Attempts per Game',
            yLabel: 'Punts per Game',
            title: 'Pass Volume vs Punting Frequency',
            insight: 'Pass-heavy teams often trail in games, leading to more 3-and-outs and punts',
            metricHelp: '<strong>Pass Attempts vs Punts:</strong> –ö–æ–º–∞–Ω–¥—ã —Å —á–∞—Å—Ç—ã–º–∏ –ø–µ—Ä–µ–¥–∞—á–∞–º–∏ —á–∞—Å—Ç–æ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞—é—Ç = –±–æ–ª—å—à–µ –ø–∞–Ω—Ç–æ–≤. –ò–≥—Ä–æ–≤–∞—è —Å–∏—Ç—É–∞—Ü–∏—è –≤–ª–∏—è–µ—Ç –Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É.'
          },
          {
            xKey: 'rush_yac_pct',
            yKey: 'rush_broken_tackle_rate',
            xLabel: 'Rush Yards After Contact %',
            yLabel: 'Broken Tackles per Rush',
            title: 'Physical Running Game ‚Äî YAC% vs Broken Tackles',
            insight: 'Elite RBs break tackles AND generate yards after contact. Top-right = power runners.',
            metricHelp: '<strong>–§–∏–∑–∏—á–µ—Å–∫–∞—è –∏–≥—Ä–∞:</strong> –≠–ª–∏—Ç–Ω—ã–µ RB –ª–æ–º–∞—é—Ç –∑–∞—Ö–≤–∞—Ç—ã –ò –Ω–∞–±–∏—Ä–∞—é—Ç —è—Ä–¥—ã –ø–æ—Å–ª–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞. –í–µ—Ä—Ö–Ω–∏–π –ø—Ä–∞–≤—ã–π = –º–æ—â–Ω—ã–µ –±–µ–≥—É–Ω—ã.'
          },
          {
            xKey: 'turnover_diff',
            yKey: 'win_pct',
            xLabel: 'Turnover Differential',
            yLabel: 'Win Percentage',
            yFormat: toPct,
            title: 'Most Predictive Stat ‚Äî Turnover Margin vs Winning',
            insight: 'Turnover differential is the single strongest predictor of wins in football',
            metricHelp: '<strong>Turnover Diff:</strong> –°–∞–º—ã–π —Å–∏–ª—å–Ω—ã–π –ø—Ä–µ–¥—Å–∫–∞–∑–∞—Ç–µ–ª—å –ø–æ–±–µ–¥ –≤ —Ñ—É—Ç–±–æ–ª–µ. –†–∞–∑–Ω–∏—Ü–∞ –æ—Ç–±–æ—Ä–æ–≤-–æ—Ç–¥–∞—á –º—è—á–∞ –Ω–∞–ø—Ä—è–º—É—é –∫–æ—Ä—Ä–µ–ª–∏—Ä—É–µ—Ç —Å –ø—Ä–æ—Ü–µ–Ω—Ç–æ–º –ø–æ–±–µ–¥.',
            quadrantHelp: {
              topRight: 'üèÜ –ß–µ–º–ø–∏–æ–Ω—ã: –æ—Ç–±–∏—Ä–∞—é—Ç –±–æ–ª—å—à–µ —á–µ–º –æ—Ç–¥–∞—é—Ç + –ø–æ–±–µ–∂–¥–∞—é—Ç - —Ñ–æ—Ä–º—É–ª–∞ —É—Å–ø–µ—Ö–∞',
              topLeft: 'üòî –ù–µ–≤–µ–∑–µ–Ω–∏–µ: –ø–ª–æ—Ö–∞—è —Ä–∞–∑–Ω–∏—Ü–∞ —Ç—É—Ä–Ω–æ–≤–µ—Ä–æ–≤, –Ω–æ –ø–æ–±–µ–∂–¥–∞—é—Ç - –∫–æ–º–ø–µ–Ω—Å–∏—Ä—É—é—Ç –≤ –¥—Ä—É–≥–∏—Ö –∑–æ–Ω–∞—Ö',
              bottomLeft: 'üíÄ –î–≤–æ–π–Ω–æ–µ –Ω–∞–∫–∞–∑–∞–Ω–∏–µ: –æ—Ç–¥–∞—é—Ç –º—è—á + –ø—Ä–æ–∏–≥—Ä—ã–≤–∞—é—Ç - –Ω—É–∂–Ω—ã –±–æ–ª—å—à–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è',
              bottomRight: 'ü§î –£–ø—É—â–µ–Ω–Ω—ã–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª: –≤—ã–∏–≥—Ä—ã–≤–∞—é—Ç —Ç—É—Ä–Ω–æ–≤–µ—Ä—ã, –Ω–æ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞—é—Ç –∏–≥—Ä—ã - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —à–∞–Ω—Å—ã'
            }
          },
          {
            xKey: 'pass_comp_pct',
            yKey: 'rec_yds_per_catch',
            xLabel: 'Completion Percentage',
            yLabel: 'Average Yards per Catch',
            title: 'Passing Philosophy ‚Äî Accuracy vs Depth',
            insight: 'High completion% + low Y/C = dink-and-dunk. Low completion% + high Y/C = vertical passing.',
            metricHelp: '<strong>–§–∏–ª–æ—Å–æ—Ñ–∏—è –ø–∞—Å–∞:</strong> –í—ã—Å–æ–∫–∏–π completion% + –Ω–∏–∑–∫–∏–µ Y/C = –∫–æ—Ä–æ—Ç–∫–∏–µ –ø–µ—Ä–µ–¥–∞—á–∏. –ù–∏–∑–∫–∏–π completion% + –≤—ã—Å–æ–∫–∏–µ Y/C = –≥–ª—É–±–æ–∫–∏–π –ø–∞—Å.',
            quadrantHelp: {
              topRight: 'üéØ –ò–¥–µ–∞–ª: —Ç–æ—á–Ω—ã–µ –ø–µ—Ä–µ–¥–∞—á–∏ + –±–æ–ª—å—à–∏–µ —è—Ä–¥—ã - —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –≥–ª—É–±–æ–∫–∏–π –ø–∞—Å',
              topLeft: 'üöÄ –í–µ—Ä—Ç–∏–∫–∞–ª—å: –Ω–∏–∑–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å, –Ω–æ –±–æ–ª—å—à–∏–µ —è—Ä–¥—ã - –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π deep ball',
              bottomLeft: 'üòî –ü—Ä–æ–±–ª–µ–º—ã: –Ω–∏–∑–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å + –∫–æ—Ä–æ—Ç–∫–∏–µ –ø–µ—Ä–µ–¥–∞—á–∏ - –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –Ω–∞–ø–∞–¥–µ–Ω–∏–µ',
              bottomRight: 'üèÉ West Coast: –≤—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å + –∫–æ—Ä–æ—Ç–∫–∏–µ –ø–µ—Ä–µ–¥–∞—á–∏ - dink-and-dunk —Å—Ç–∏–ª—å'
            }
          },
          {
            xKey: 'rush_att_per_game',
            yKey: 'pass_yds_per_att',
            xLabel: 'Rush Attempts per Game',
            yLabel: 'Pass Yards per Attempt',
            title: 'Run Game Impact on Passing Efficiency',
            insight: 'Run-first teams unlock play-action, creating better passing opportunities',
            metricHelp: '<strong>–ë–µ–≥–æ–≤–∞—è –∏–≥—Ä–∞:</strong> –ö–æ–º–∞–Ω–¥—ã —Å —á–∞—Å—Ç—ã–º –±–µ–≥–æ–º —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É—é—Ç play-action, —Å–æ–∑–¥–∞–≤–∞—è –ª—É—á—à–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è –ø–∞—Å–∞.'
          },
          {
            xKey: 'def_sacks_per_game',
            yKey: 'def_ints_per_game',
            xLabel: 'Defensive Sacks per Game',
            yLabel: 'Defensive Interceptions per Game',
            title: 'Pass Rush vs Coverage ‚Äî What Creates Turnovers?',
            insight: 'Does pressure create INTs, or does coverage give time for sacks? Both work!',
            metricHelp: '<strong>Pass Rush vs Coverage:</strong> –î–∞–≤–ª–µ–Ω–∏–µ —Å–æ–∑–¥–∞—ë—Ç –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã –∏–ª–∏ –ø–æ–∫—Ä—ã—Ç–∏–µ –¥–∞—ë—Ç –≤—Ä–µ–º—è –¥–ª—è —Å—ç–∫–æ–≤? –û–±–∞ —Ä–∞–±–æ—Ç–∞—é—Ç!'
          },
          {
            xKey: 'explosive_plays_per_game',
            yKey: 'punts_per_game',
            xLabel: '20+ Yard Plays per Game',
            yLabel: 'Punts per Game',
            title: 'Explosive Plays vs Punting',
            insight: 'Big plays sustain drives and reduce punting frequency. Explosive offense = fewer punts.',
            metricHelp: '<strong>–ë–æ–ª—å—à–∏–µ –∏–≥—Ä—ã:</strong> –í–∑—Ä—ã–≤–Ω—ã–µ —Ä–æ–∑—ã–≥—Ä—ã—à–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –¥—Ä–∞–π–≤—ã –∏ —É–º–µ–Ω—å—à–∞—é—Ç —á–∞—Å—Ç–æ—Ç—É –ø–∞–Ω—Ç–æ–≤. –í–∑—Ä—ã–≤–Ω–æ–µ –Ω–∞–ø–∞–¥–µ–Ω–∏–µ = –º–µ–Ω—å—à–µ –ø–∞–Ω—Ç–æ–≤.'
          },
          {
            xKey: 'pass_rush_ratio',
            yKey: 'win_pct',
            xLabel: 'Pass/Rush Attempt Ratio',
            yLabel: 'Win Percentage',
            yFormat: toPct,
            title: 'Game Script Analysis ‚Äî Pass/Run Balance vs Wins',
            insight: 'Do teams pass because they\'re losing? Or run because they\'re winning? Causation vs correlation.',
            metricHelp: '<strong>–ò–≥—Ä–æ–≤–∞—è —Å–∏—Ç—É–∞—Ü–∏—è:</strong> –ö–æ–º–∞–Ω–¥—ã –ø–∞—Å—É—é—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞—é—Ç, –∏–ª–∏ –±–µ–≥—É—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤—ã–∏–≥—Ä—ã–≤–∞—é—Ç? –ü—Ä–∏—á–∏–Ω–Ω–æ—Å—Ç—å vs –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è.'
          },
          {
            xKey: 'fg_pct',
            yKey: 'win_pct',
            xLabel: 'Field Goal %',
            yLabel: 'Win Percentage',
            yFormat: toPct,
            title: 'Kicking Accuracy vs Winning',
            insight: 'Games are won by 3 points. Field goal accuracy matters more in close games.',
            metricHelp: '<strong>Field Goal %:</strong> –ü—Ä–æ—Ü–µ–Ω—Ç –ø–æ–ø–∞–¥–∞–Ω–∏–π –ø–æ –≤–æ—Ä–æ—Ç–∞–º. –ò–≥—Ä—ã –≤—ã–∏–≥—Ä—ã–≤–∞—é—Ç—Å—è 3 –æ—á–∫–∞–º–∏ - —Ç–æ—á–Ω–æ—Å—Ç—å –∫–∏–∫–∫–µ—Ä–∞ –≤–∞–∂–Ω–∞ –≤ –±–ª–∏–∑–∫–∏—Ö –º–∞—Ç—á–∞—Ö.'
          },
          {
            xKey: 'punt_net_avg',
            yKey: 'def_ints_per_game',
            xLabel: 'Punt Net Average (Yards)',
            yLabel: 'Defensive INTs per Game',
            title: 'Field Position Battle ‚Äî Punting vs Defensive Turnovers',
            insight: 'Better punting pins opponents deep, forcing riskier throws and creating turnover opportunities.',
            metricHelp: '<strong>Punt Net vs DEF INTs:</strong> –õ—É—á—à–∏–π –ø–∞–Ω—Ç–∏–Ω–≥ –ø—Ä–∏–∂–∏–º–∞–µ—Ç —Å–æ–ø–µ—Ä–Ω–∏–∫–æ–≤ –≥–ª—É–±–æ–∫–æ, –∑–∞—Å—Ç–∞–≤–ª—è—è —Ä–∏—Å–∫–æ–≤–∞—Ç—å –ø–∞—Å–∞–º–∏ –∏ —Å–æ–∑–¥–∞–≤–∞—è –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã.'
          },
          {
            xKey: 'punts_in_20_pct',
            yKey: 'def_sacks_per_game',
            xLabel: 'Punts Inside 20 (%)',
            yLabel: 'Defensive Sacks per Game',
            title: 'Special Teams Impact ‚Äî Punt Placement vs Defensive Pressure',
            insight: 'Coffin-corner punts force conservative play-calling, giving pass rush more opportunities.',
            metricHelp: '<strong>Punts in 20:</strong> –ü–∞–Ω—Ç—ã –≤–Ω—É—Ç—Ä—å 20 –∑–∞—Å—Ç–∞–≤–ª—è—é—Ç –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π –ø–ª–µ–π–∫–æ–ª–ª–∏–Ω–≥, –¥–∞–≤–∞—è pass rush –±–æ–ª—å—à–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π.'
          },
          {
            xKey: 'total_off_tds',
            yKey: 'xp_pct',
            xLabel: 'Total Offensive Touchdowns',
            yLabel: 'Extra Point %',
            title: 'Scoring Frequency vs XP Accuracy',
            insight: 'High-scoring teams attempt more XPs. Does volume increase pressure and lead to more misses?',
            metricHelp: '<strong>TDs vs XP%:</strong> –í—ã—Å–æ–∫–æ—Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –ø—ã—Ç–∞—é—Ç—Å—è –±–æ–ª—å—à–µ XP. –û–±—ä—ë–º —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –¥–∞–≤–ª–µ–Ω–∏–µ –∏ –≤–µ–¥—ë—Ç –∫ –±–æ–ª—å—à–∏–º –ø—Ä–æ–º–∞—Ö–∞–º?'
          },
          {
            xKey: 'sack_rate',
            yKey: 'qb_rating',
            xLabel: 'Sack Rate (%)',
            yLabel: 'QB Rating',
            title: 'QB Protection vs Efficiency',
            insight: 'Better pass protection leads to better QB performance. Measures offensive line impact on QB success.',
            metricHelp: '<strong>Sack Rate vs QB Rating:</strong> –õ—É—á—à–∞—è –∑–∞—â–∏—Ç–∞ –ø–∞—Å–∞ = –ª—É—á—à–∞—è —Ä–∞–±–æ—Ç–∞ QB. –ò–∑–º–µ—Ä—è–µ—Ç –≤–ª–∏—è–Ω–∏–µ O-line –Ω–∞ —É—Å–ø–µ—Ö –∫–≤–æ—Ç–µ—Ä–±–µ–∫–∞.'
          },
          {
            xKey: 'def_ints_per_game',
            yKey: 'win_pct',
            xLabel: 'Defensive INTs per Game',
            yLabel: 'Win Percentage',
            yFormat: toPct,
            title: 'Defensive Turnover Creation vs Winning',
            insight: 'Defense wins championships? Creating turnovers is one of the strongest predictors of winning.',
            metricHelp: '<strong>DEF INTs vs Wins:</strong> –ó–∞—â–∏—Ç–∞ –≤—ã–∏–≥—Ä—ã–≤–∞–µ—Ç —á–µ–º–ø–∏–æ–Ω–∞—Ç—ã? –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–µ—Ö–≤–∞—Ç–æ–≤ - –æ–¥–∏–Ω –∏–∑ —Å–∏–ª—å–Ω–µ–π—à–∏—Ö –ø—Ä–µ–¥—Å–∫–∞–∑–∞—Ç–µ–ª–µ–π –ø–æ–±–µ–¥.'
          },
          {
            xKey: 'pass_int_pct',
            yKey: 'win_pct',
            xLabel: 'Interception Rate (%)',
            yLabel: 'Win Percentage',
            yFormat: toPct,
            title: 'Ball Security vs Winning',
            insight: 'Teams that protect the ball win games. Lower INT rate = more wins.',
            metricHelp: '<strong>INT Rate vs Wins:</strong> –ö–æ–º–∞–Ω–¥—ã, –∑–∞—â–∏—â–∞—é—â–∏–µ –º—è—á, –≤—ã–∏–≥—Ä—ã–≤–∞—é—Ç –∏–≥—Ä—ã. –ù–∏–∑–∫–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç –ø–µ—Ä–µ—Ö–≤–∞—Ç–æ–≤ = –±–æ–ª—å—à–µ –ø–æ–±–µ–¥.'
          },
          {
            xKey: 'pass_yds_per_att',
            yKey: 'rush_explosive_rate',
            xLabel: 'Pass Yards per Attempt',
            yLabel: 'Rush Explosive Play Rate (%)',
            title: 'Explosive Offense Philosophy',
            insight: 'Do teams with explosive passing also have explosive running? Or specialize in one?',
            metricHelp: '<strong>Pass vs Rush Explosives:</strong> –ö–æ–º–∞–Ω–¥—ã —Å –≤–∑—Ä—ã–≤–Ω—ã–º –ø–∞—Å–æ–º —Ç–∞–∫–∂–µ –∏–º–µ—é—Ç –≤–∑—Ä—ã–≤–Ω–æ–π –±–µ–≥? –ò–ª–∏ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è –Ω–∞ –æ–¥–Ω–æ–º?'
          },
          {
            xKey: 'pass_yds_per_att',
            yKey: 'rush_yds_per_att',
            xLabel: 'Pass Yards per Attempt',
            yLabel: 'Rush Yards per Attempt',
            title: 'Offensive Efficiency Balance',
            insight: 'Balanced efficiency vs specialized offense. Top-right = elite at both. Others = one-dimensional.',
            metricHelp: '<strong>Pass Y/A vs Rush Y/A:</strong> –°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å vs —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –Ω–∞–ø–∞–¥–µ–Ω–∏–µ. –í–µ—Ä—Ö–Ω–∏–π –ø—Ä–∞–≤—ã–π = —ç–ª–∏—Ç–∞ –≤ –æ–±–æ–∏—Ö.'
          },
          {
            xKey: 'td_per_play',
            yKey: 'win_pct',
            xLabel: 'Touchdowns per Play',
            yLabel: 'Win Percentage',
            yFormat: toPct,
            title: 'Red Zone Scoring Efficiency vs Winning',
            insight: 'Finishing drives with TDs (not FGs) wins games. Measures red zone effectiveness.',
            metricHelp: '<strong>TD per Play:</strong> –§–∏–Ω–∏—à –¥—Ä–∞–π–≤–æ–≤ —Ç–∞—á–¥–∞—É–Ω–∞–º–∏ (–Ω–µ FG) –≤—ã–∏–≥—Ä—ã–≤–∞–µ—Ç –∏–≥—Ä—ã. –ò–∑–º–µ—Ä—è–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∫—Ä–∞—Å–Ω–æ–π –∑–æ–Ω—ã.'
          },
          {
            xKey: 'def_sacks_per_game',
            yKey: 'pass_comp_pct',
            xLabel: 'Defensive Sacks per Game',
            yLabel: 'Team Completion %',
            title: 'Defensive Pressure Impact',
            insight: 'Does generating sacks correlate with opponent incompletions? Pass rush vs coverage.',
            metricHelp: '<strong>DEF Sacks vs Completion%:</strong> –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—ç–∫–æ–≤ –∫–æ—Ä—Ä–µ–ª–∏—Ä—É–µ—Ç —Å incompletions —Å–æ–ø–µ—Ä–Ω–∏–∫–∞? Pass rush vs coverage.'
          },
          {
            xKey: 'rush_att_per_game',
            yKey: 'pass_ints_per_game',
            xLabel: 'Rush Attempts per Game',
            yLabel: 'INTs Thrown per Game',
            title: 'Ball Control Strategy',
            insight: 'Running teams protect the ball better. Time of possession = fewer risky throws = fewer turnovers.',
            metricHelp: '<strong>Rush Att vs INTs:</strong> –ë–µ–≥–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã –ª—É—á—à–µ –∑–∞—â–∏—â–∞—é—Ç –º—è—á. –ö–æ–Ω—Ç—Ä–æ–ª—å –≤–ª–∞–¥–µ–Ω–∏—è = –º–µ–Ω—å—à–µ —Ä–∏—Å–∫–æ–≤–∞–Ω–Ω—ã—Ö –±—Ä–æ—Å–∫–æ–≤ = –º–µ–Ω—å—à–µ –ø–µ—Ä–µ—Ö–≤–∞—Ç–æ–≤.'
          },
          {
            xKey: 'rec_catches',
            yKey: 'rec_yds_per_catch',
            xLabel: 'Total Receptions',
            yLabel: 'Yards per Catch',
            title: 'Receiving Efficiency vs Volume',
            insight: 'High-volume short passing (bottom-right) vs low-volume deep passing (top-left). West Coast vs vertical.',
            metricHelp: '<strong>Receptions vs Y/C:</strong> –í—ã—Å–æ–∫–æ–æ–±—ä—ë–º–Ω—ã–π –∫–æ—Ä–æ—Ç–∫–∏–π –ø–∞—Å (–Ω–∏–∂–Ω–∏–π –ø—Ä–∞–≤—ã–π) vs –Ω–∏–∑–∫–æ–æ–±—ä—ë–º–Ω—ã–π –≥–ª—É–±–æ–∫–∏–π (–≤–µ—Ä—Ö–Ω–∏–π –ª–µ–≤—ã–π). West Coast vs vertical.'
          },
          {
            xKey: 'sack_rate',
            yKey: 'pass_comp_pct',
            xLabel: 'Sack Rate (%)',
            yLabel: 'Completion %',
            title: 'QB Accuracy Under Pressure',
            insight: 'Can QBs maintain accuracy when facing pressure? Mental toughness and pocket presence test.',
            metricHelp: '<strong>Sack Rate vs Completion%:</strong> QB –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç —Ç–æ—á–Ω–æ—Å—Ç—å –ø–æ–¥ –¥–∞–≤–ª–µ–Ω–∏–µ–º? –¢–µ—Å—Ç –º–µ–Ω—Ç–∞–ª—å–Ω–æ–π —Å–∏–ª—ã –∏ —Ä–∞–±–æ—Ç—ã –≤ –∫–∞—Ä–º–∞–Ω–µ.'
          },
          {
            xKey: 'def_forced_fum',
            yKey: 'def_fum_rec',
            xLabel: 'Fumbles Forced',
            yLabel: 'Fumbles Recovered',
            title: 'Fumble Recovery Luck',
            insight: 'Fumbles are 50/50 balls. Teams above trend = lucky, below trend = unlucky. Regression candidate.',
            metricHelp: '<strong>Forced vs Recovered:</strong> –§–∞–º–±–ª—ã - 50/50 –º—è—á–∏. –ö–æ–º–∞–Ω–¥—ã –≤—ã—à–µ —Ç—Ä–µ–Ω–¥–∞ = —É–¥–∞—á–ª–∏–≤—ã–µ, –Ω–∏–∂–µ = –Ω–µ—É–¥–∞—á–ª–∏–≤—ã–µ. –ö–∞–Ω–¥–∏–¥–∞—Ç—ã –Ω–∞ —Ä–µ–≥—Ä–µ—Å—Å–∏—é.'
          },
          {
            xKey: 'rec_catches',
            yKey: 'drop_rate',
            xLabel: 'Total Receptions',
            yLabel: 'Drop Rate (%)',
            title: 'Receiving Corps Reliability',
            insight: 'Do high-volume receivers drop more passes? Fatigue vs concentration at high workloads.',
            metricHelp: '<strong>Receptions vs Drop Rate:</strong> –ü—Ä–∏–Ω–∏–º–∞—é—â–∏–µ —Å –≤—ã—Å–æ–∫–∏–º –æ–±—ä—ë–º–æ–º —Ç–µ—Ä—è—é—Ç –±–æ–ª—å—à–µ –ø–µ—Ä–µ–¥–∞—á? –£—Å—Ç–∞–ª–æ—Å—Ç—å vs –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è –ø—Ä–∏ –≤—ã—Å–æ–∫–∏—Ö –Ω–∞–≥—Ä—É–∑–∫–∞—Ö.'
          },
          {
            xKey: 'def_deflections',
            yKey: 'def_ints',
            xLabel: 'Pass Deflections',
            yLabel: 'Defensive Interceptions',
            title: 'Defensive Playmaking',
            insight: 'Creating INTs requires getting hands on the ball first. Coverage quality indicator.',
            metricHelp: '<strong>Deflections vs INTs:</strong> –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–µ—Ö–≤–∞—Ç–æ–≤ —Ç—Ä–µ–±—É–µ—Ç —Å–Ω–∞—á–∞–ª–∞ –¥–æ—Å—Ç–∞—Ç—å –º—è—á —Ä—É–∫–∞–º–∏. –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∫–∞—á–µ—Å—Ç–≤–∞ –ø–æ–∫—Ä—ã—Ç–∏—è.'
          },
          {
            xKey: 'rush_broken_tackles',
            yKey: 'rush_tds',
            xLabel: 'Broken Tackles (Rushing)',
            yLabel: 'Rushing Touchdowns',
            title: 'Run Game Physicality',
            insight: 'Power runners break tackles AND score TDs. Physical dominance at the goal line.',
            metricHelp: '<strong>Broken Tackles vs Rush TDs:</strong> –ú–æ—â–Ω—ã–µ –±–µ–≥—É–Ω—ã –ª–æ–º–∞—é—Ç –∑–∞—Ö–≤–∞—Ç—ã –ò –∑–∞–±–∏–≤–∞—é—Ç TD. –§–∏–∑–∏—á–µ—Å–∫–æ–µ –¥–æ–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –ª–∏–Ω–∏–∏ –≤–æ—Ä–æ—Ç.'
          },
          {
            xKey: 'punt_net_avg',
            yKey: 'win_pct',
            xLabel: 'Punt Net Average (Yards)',
            yLabel: 'Win Percentage',
            yFormat: toPct,
            title: 'Special Teams Field Position Impact',
            insight: 'Better punting creates better field position. Hidden yards that contribute to winning.',
            metricHelp: '<strong>Punt Net vs Win%:</strong> –õ—É—á—à–∏–π –ø–∞–Ω—Ç–∏–Ω–≥ —Å–æ–∑–¥–∞—ë—Ç –ª—É—á—à—É—é –ø–æ–∑–∏—Ü–∏—é –ø–æ–ª—è. –°–∫—Ä—ã—Ç—ã–µ —è—Ä–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å–ø–æ—Å–æ–±—Å—Ç–≤—É—é—Ç –ø–æ–±–µ–¥–∞–º.'
          },
          {
            xKey: 'pass_att_per_game',
            yKey: 'sacks_allowed_per_game',
            xLabel: 'Pass Attempts per Game',
            yLabel: 'Sacks Allowed per Game',
            title: 'Pass Protection Breakdown Rate',
            insight: 'More dropbacks = more sacks? Pass-heavy offense fatigue on offensive line.',
            metricHelp: '<strong>Pass Att vs Sacks Allowed:</strong> –ë–æ–ª—å—à–µ –¥—Ä–æ–ø–±—ç–∫–æ–≤ = –±–æ–ª—å—à–µ —Å—ç–∫–æ–≤? –£—Å—Ç–∞–ª–æ—Å—Ç—å –ø–∞—Å–æ–≤–æ–π –∑–∞—â–∏—Ç—ã O-line –ø—Ä–∏ —á–∞—Å—Ç—ã—Ö –ø–∞—Å–∞—Ö.'
          },
          {
            xKey: 'def_tackles',
            yKey: 'def_sacks',
            xLabel: 'Total Tackles',
            yLabel: 'Defensive Sacks',
            title: 'Defensive Tackle Efficiency',
            insight: 'High tackle teams chase plays. Low tackle + high sack teams make disruptive plays.',
            metricHelp: '<strong>Tackles vs Sacks:</strong> –ö–æ–º–∞–Ω–¥—ã —Å –±–æ–ª—å—à–∏–º —á–∏—Å–ª–æ–º tackles –≥–æ–Ω—è—Ç—Å—è –∑–∞ –∏–≥—Ä–æ–π. –ù–∏–∑–∫–∏–µ tackles + –≤—ã—Å–æ–∫–∏–µ sacks = —Ä–∞–∑—Ä—É—à–∏—Ç–µ–ª—å–Ω—ã–µ –∏–≥—Ä—ã.'
          },
          {
            xKey: 'yds_per_play',
            yKey: 'explosive_plays_per_game',
            xLabel: 'Yards per Play',
            yLabel: 'Explosive Plays (20+) per Game',
            title: 'Offensive Consistency vs Explosiveness',
            insight: 'Consistent efficient offense (left) vs boom-or-bust explosive offense (right).',
            metricHelp: '<strong>Y/Play vs Explosive Plays:</strong> –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –Ω–∞–ø–∞–¥–µ–Ω–∏–µ (—Å–ª–µ–≤–∞) vs boom-or-bust –≤–∑—Ä—ã–≤–Ω–æ–µ (—Å–ø—Ä–∞–≤–∞).'
          },
          {
            xKey: 'total_turnovers',
            yKey: 'total_takeaways',
            xLabel: 'Turnovers (Giveaways)',
            yLabel: 'Takeaways',
            title: 'Turnover Differential Components',
            insight: 'Top-right = aggressive both ways. Bottom-left = conservative. Diagonal = turnover margin.',
            metricHelp: '<strong>Giveaways vs Takeaways:</strong> –í–µ—Ä—Ö–Ω–∏–π –ø—Ä–∞–≤—ã–π = –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ—Å—Ç—å —Å –æ–±–µ–∏—Ö —Å—Ç–æ—Ä–æ–Ω. –ù–∏–∂–Ω–∏–π –ª–µ–≤—ã–π = –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–æ—Å—Ç—å. –î–∏–∞–≥–æ–Ω–∞–ª—å = turnover margin.'
          },
          {
            xKey: 'rec_yac_pct',
            yKey: 'rec_yds_per_catch',
            xLabel: 'Receiving YAC %',
            yLabel: 'Yards per Catch',
            title: 'Receiving YAC Creation',
            insight: 'YAC from short passes (high YAC%, low Y/C) vs downfield catches (low YAC%, high Y/C). Scheme design.',
            metricHelp: '<strong>YAC% vs Y/C:</strong> YAC –æ—Ç –∫–æ—Ä–æ—Ç–∫–∏—Ö –ø–µ—Ä–µ–¥–∞—á (–≤—ã—Å–æ–∫–∏–π YAC%, –Ω–∏–∑–∫–∏–π Y/C) vs –ª–æ–≤–ª—è –Ω–∞ –≥–ª—É–±–∏–Ω–µ (–Ω–∏–∑–∫–∏–π YAC%, –≤—ã—Å–æ–∫–∏–π Y/C). –°—Ö–µ–º–∞ –¥–∏–∑–∞–π–Ω–∞.'
          }
        ];

        const root = d3.select('#root');
        const sel = d3.select('#conf');

        function redraw() {
          const conf = sel.node().value;
          root.selectAll('*').remove();
          const rows = allRows.filter(r => 
            conf === 'ALL' || (r.conference || '').toUpperCase() === conf
          );
          charts.forEach(cfg => drawScatter(root, rows, cfg));
        }

        sel.on('change', redraw);
        redraw();
      }).catch(err => {
        d3.select('#root').append('div').style('color','crimson').text('Failed to load data: '+err);
        console.error(err);
      });
    }

    window.addEventListener('DOMContentLoaded', render);
  </script>
</head>
<body>
  <div class="container">
    <h1>Team Statistics ‚Äî Interesting Correlations</h1>
    <div class="subtitle">
      34 non-obvious relationships between team metrics. Red = above trend, Blue = below trend.
      R¬≤ shows correlation strength. Each graph reveals strategic insights.
    </div>
    <div class="controls">
      <label for="conf">Conference:</label>
      <select id="conf">
        <option value="ALL" selected>All Conferences</option>
        <option value="AFC">AFC only</option>
        <option value="NFC">NFC only</option>
      </select>
    </div>
    <details class="info" open>
      <summary>What These Graphs Show</summary>
      <p>
        Unlike typical "stat vs Win%" charts, these explore <strong>cross-metric relationships</strong> that reveal:
      </p>
      <ul>
        <li><strong>Causation patterns</strong>: Does bad run defense force more interceptions?</li>
        <li><strong>Strategy trade-offs</strong>: Completion% vs passing depth, aggression vs ball security</li>
        <li><strong>Hidden connections</strong>: How pass rush affects coverage, how run game unlocks passing</li>
        <li><strong>Team identity</strong>: High-variance aggressive teams vs conservative ball-control teams</li>
      </ul>
      <p>
        <strong>R¬≤ (correlation strength)</strong>: 0.0 = no relationship, 1.0 = perfect correlation.
        Strong (‚â•0.5) = predictive relationship. Weak (&lt;0.25) = interesting outliers to explore.
      </p>
    </details>
    <div id="root"></div>
    <div class="subtitle">Data: stats_scripts/output/team_aggregated_stats.csv</div>
  </div>
</body>
</html>
